"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5517],{5517:(y,u,s)=>{s.r(u),s.d(u,{CommentsWithpostPageModule:()=>T});var g=s(6895),m=s(433),e=s(4556),d=s(2598),l=s(655),t=s(8256),_=s(427);function f(o,a){if(1&o&&(t.TgZ(0,"ion-item",24)(1,"ion-label",15)(2,"p",25),t._uU(3),t.qZA()()()),2&o){const n=t.oxw(2);t.xp6(3),t.Oqu(n.post.caption)}}function x(o,a){if(1&o&&t._UZ(0,"img",26),2&o){const n=t.oxw(2);t.s9C("src",n.post.img,t.LSH)}}function C(o,a){if(1&o&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij(" ",n.post.caption," ")}}function P(o,a){if(1&o&&(t.TgZ(0,"div",28),t._UZ(1,"div",29),t.TgZ(2,"div",30)(3,"h2",31)(4,"ion-text",32),t._uU(5),t.qZA()(),t.TgZ(6,"p")(7,"ion-text",33),t._uU(8),t.ALo(9,"date"),t.qZA()(),t.TgZ(10,"ion-chip",34),t._UZ(11,"ion-icon",35),t.TgZ(12,"ion-text",36),t._uU(13,"Send over a night post"),t.qZA()()()()),2&o){const n=t.oxw(2);t.xp6(5),t.Oqu(n.post.caption),t.xp6(3),t.hij("Sleeping since ",t.xi3(9,2,n.post.created_at,"shortTime"),"")}}function M(o,a){if(1&o&&(t.TgZ(0,"div",37),t._UZ(1,"div",38),t.TgZ(2,"div",30)(3,"h2",31)(4,"ion-text",32),t._uU(5),t.qZA()(),t.TgZ(6,"p")(7,"ion-text",33),t._uU(8),t.qZA()(),t.TgZ(9,"ion-chip",34),t._UZ(10,"ion-icon",35),t.TgZ(11,"ion-text",36),t._uU(12,"Say Hi!"),t.qZA()(),t._uU(13," d "),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(5),t.Oqu(n.post.caption),t.xp6(3),t.hij("Slept for ",n.sleptFor(n.post.wakeup),"")}}function b(o,a){if(1&o&&(t.TgZ(0,"ion-avatar"),t._UZ(1,"img",39)(2,"img",40),t.qZA()),2&o){const n=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("src",i.getAvatarURL(n[0]),t.LSH),t.xp6(1),t.Q6J("src",i.getReactionIcon(n[1]),t.LSH)}}function O(o,a){if(1&o&&(t.TgZ(0,"div",14)(1,"ion-card-content",15),t.YNc(2,f,4,1,"ion-item",16),t.YNc(3,x,1,1,"img",17),t.YNc(4,C,2,1,"div",18),t.YNc(5,P,14,5,"div",19),t.YNc(6,M,14,2,"div",20),t.TgZ(7,"div",21)(8,"ion-item",22),t.YNc(9,b,3,2,"ion-avatar",23),t.qZA()()()()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.post.caption&&n.post.img),t.xp6(1),t.Q6J("ngIf",n.post.img),t.xp6(1),t.Q6J("ngIf",null!=n.post.caption&&!n.post.img&&!1===n.post.sleep),t.xp6(1),t.Q6J("ngIf",!0===n.post.sleep),t.xp6(1),t.Q6J("ngIf",n.post.wakeup>5&&!1===n.post.sleep),t.xp6(3),t.Q6J("ngForOf",n.post.reactions)}}function v(o,a){if(1&o&&(t.TgZ(0,"ion-card",41)(1,"ion-item",42)(2,"ion-avatar",1),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"ion-label")(5,"h4",43),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()()()()),2&o){const n=a.$implicit;t.xp6(3),t.s9C("src",n.profiles.avatar_url,t.LSH),t.xp6(3),t.hij(" ",n.profiles.full_name,""),t.xp6(2),t.hij(" ",n.content,"")}}const Z=[{path:"",component:(()=>{class o{constructor(n,i){this.apiService=n,this.actRoute=i,this.firstLoad=!0}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.profile=this.apiService.profile,this.actRoute.queryParams.subscribe(n=>{console.log("url parms",n),this.postId=n.postId}),this.post=yield this.apiService.getOnePost(this.postId),console.log("post from comeents page",this.post),yield this.getComment(),console.log(this.commentList),this.notifyerId=this.post.authorId})}addComment(){return(0,l.mG)(this,void 0,void 0,function*(){let n={content:this.comment,postId:this.postId},i=null;null!=this.post.first_comment&&(i=!0),console.log(n),yield this.apiService.saveComment(n,this.notifyerId,i),this.ngOnInit()})}getComment(){return(0,l.mG)(this,void 0,void 0,function*(){this.firstLoad?(this.commentList=JSON.parse(localStorage.getItem("comments")),this.firstLoad=!1):this.commentList=yield this.apiService.getComments(this.postId)})}getAvatarURL(n){return"http://qupalcyhiytufftknrzr.supabase.co/storage/v1/object/public/avatars/"+n}getReactionIcon(n){switch(n){case"love":return"../../../assets/images/in-love.png";case"love2":return"../../../assets/images/love.png";case"like":return"../../../assets/images/like.png";case"dislike":return"../../../assets/images/dislike.png";case"laugh":return"../../../assets/images/laughing.png";case"sad":return"../../../assets/images/sad.png"}}timeAgo(n){if(!n)return"a long time ago";let i=(Date.now()-n)/1e3;if(i<10)return"just now";if(i<60)return"a moment ago";const p=[60,60,24,30,12];let r;for(r=0;Math.floor(i/p[r])>0;r++)i/=p[r];const h=Math.floor(i)>1?"s":"";return Math.floor(i)+[" second"," minute"," hour"," day"," month"," year"][r]+h+" ago"}sleptFor(n){if(!n)return"a long time ago";let i=n/1e3;if(i<60)return"less than a minute";const p=[60,60,24,30,12];let r;for(r=0;Math.floor(i/p[r])>0;r++)i/=p[r];const h=Math.floor(i)>1?"s":"";return"Slept for "+Math.floor(i)+[" second"," minute"," hour"," day"," month"," year"][r]+h}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(_.s),t.Y36(d.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-comments-withpost"]],decls:20,vars:4,consts:[["color","danger"],["slot","start"],[1,"ion-padding"],[1,"ion-no-margin","ion-margin-bottom"],["class","postStyle",4,"ngIf"],["class","ion-no-margin","style","margin-bottom: 1px;",4,"ngFor","ngForOf"],["slot","start",1,"ms-1",2,"height","40px","width","40px"],["alt","",3,"src"],[1,"ion-no-margin","ms-1",2,"border-radius","20px","border","1px solid gray"],[1,"ion-no-padding"],["type","text","placeholder","Add a comment...",3,"ngModel","ngModelChange"],["slot","end"],["size","small","color","danger",3,"click"],["name","send","color","light"],[1,"postStyle"],[1,"ion-no-margin","ion-no-padding"],["lines","none","class","ion-no-padding ion-margin-start",4,"ngIf"],["class","postImage",3,"src",4,"ngIf"],["class","ion-text-center ion-padding dark",4,"ngIf"],["style","background-image: url('https://cdns-images.dzcdn.net/images/artist/3727561b2d09d3898bec620e873fbcc2/500x500.jpg');\n      background-size:cover;\n      background-position: center;",4,"ngIf"],["style","background-image: url('https://www.igp.com/blog/wp-content/uploads/2022/11/good-morning-img.jpg');\n              background-size:cover;\n              background-position: center;",4,"ngIf"],[1,"peopleReacted"],["lines","none",1,"ion-no-padding"],[4,"ngFor","ngForOf"],["lines","none",1,"ion-no-padding","ion-margin-start"],[1,"ion-no-margin"],[1,"postImage",3,"src"],[1,"ion-text-center","ion-padding","dark"],[2,"background-image","url('https://cdns-images.dzcdn.net/images/artist/3727561b2d09d3898bec620e873fbcc2/500x500.jpg')","background-size","cover","background-position","center"],[2,"height","110px"],[1,"ion-text-center","ion-padding-top","ion-margin-top"],[1,"bold","ion-padding-top"],["color","light"],[2,"color","rgb(201, 201, 201)","background-color","antiquewhite","background-color","rgba(128, 128, 128, 0.5)","font-size","17px","border-radius","25px"],["color","medium"],["color","light","name","moon"],["color","light",1,"bold"],[2,"background-image","url('https://www.igp.com/blog/wp-content/uploads/2022/11/good-morning-img.jpg')","background-size","cover","background-position","center"],[2,"height","140px"],[1,"userAvatar",3,"src"],[1,"reaction",3,"src"],[1,"ion-no-margin",2,"margin-bottom","1px"],["lines","none"],[1,"bold"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Comments"),t.qZA()()(),t.TgZ(6,"ion-content",2)(7,"ion-card",3),t.YNc(8,O,10,6,"div",4),t.qZA(),t.YNc(9,v,9,3,"ion-card",5),t.qZA(),t.TgZ(10,"ion-footer")(11,"ion-toolbar")(12,"ion-avatar",6),t._UZ(13,"img",7),t.qZA(),t.TgZ(14,"ion-card",8)(15,"ion-card-content",9)(16,"ion-input",10),t.NdJ("ngModelChange",function(c){return i.comment=c}),t.qZA()()(),t.TgZ(17,"ion-buttons",11)(18,"ion-fab-button",12),t.NdJ("click",function(){return i.addComment()}),t._UZ(19,"ion-icon",13),t.qZA()()()()),2&n&&(t.xp6(8),t.Q6J("ngIf",i.post),t.xp6(1),t.Q6J("ngForOf",i.commentList),t.xp6(4),t.s9C("src",i.profile.avatar_url||"",t.LSH),t.xp6(3),t.Q6J("ngModel",i.comment))},dependencies:[g.sg,g.O5,m.JJ,m.On,e.BJ,e.oU,e.Sm,e.PM,e.FN,e.hM,e.W2,e.W4,e.fr,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.yW,e.wd,e.sr,e.j9,e.cs,g.uU],styles:[".avatar[_ngcontent-%COMP%]{border:2px solid #eb445a}ion-card[_ngcontent-%COMP%]{border-radius:10px!important;border:1px solid #ffffff;box-shadow:5px 5px 20px #f0efef}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding-bottom:0!important}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-left:5px!important;padding-right:5px!important}.searchBar[_ngcontent-%COMP%]{border-radius:30px!important}.icons[_ngcontent-%COMP%]   .icon1[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:3%;top:79%!important;z-index:999;height:20px}.icons[_ngcontent-%COMP%]   .icon2[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:12%!important;top:79%!important;height:20px;z-index:999}.icons[_ngcontent-%COMP%]   .icon3[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:21%!important;height:20px;z-index:999;top:79%!important}ion-popover[_ngcontent-%COMP%]   ng-template[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: white !important}ion-popover[_ngcontent-%COMP%]   ng-template[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: white !important}.commentButton[_ngcontent-%COMP%]{margin:-14px!important}.postStyle[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .postImage[_ngcontent-%COMP%]{border-radius:25px 25px 0 0!important;width:100%}.postStyle[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:30px!important;width:30px!important}.nightPost[_ngcontent-%COMP%]   .postImage[_ngcontent-%COMP%]{height:200px!important;width:100%!important;object-fit:cover!important;border-radius:30px 30px 0 0!important}.upperLayer[_ngcontent-%COMP%]{height:200px!important;width:96%!important;background-color:#5959593d!important;position:absolute!important;top:0!important;border-radius:30px 30px 0 0!important}.peopleReacted[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{position:relative}.peopleReacted[_ngcontent-%COMP%]   .userAvatar[_ngcontent-%COMP%]{height:30px!important;width:30px!important}.peopleReacted[_ngcontent-%COMP%]   .userAvatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px!important;width:30px!important;object-fit:cover}.peopleReacted[_ngcontent-%COMP%]   .reaction[_ngcontent-%COMP%]{width:22px;height:22px;position:absolute;z-index:999;left:5px;object-fit:contain;top:16px}ion-button[_ngcontent-%COMP%]{height:35px!important}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:110px!important;width:110px!important}.postStyle[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:30px!important;width:30px!important}.icons[_ngcontent-%COMP%]   .icon4[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:3%;z-index:999;height:20px;top:72%}.icons[_ngcontent-%COMP%]   .icon5[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:12%!important;height:20px;z-index:999;top:72%}.icons[_ngcontent-%COMP%]   .icon6[_ngcontent-%COMP%]{position:absolute;bottom:13%!important;left:21%!important;height:20px;z-index:999;top:72%}.reactionPopupModal[_ngcontent-%COMP%]{position:fixed;top:55px;width:320px;height:100%;z-index:999999;right:0;padding:0 10px}.reactionPopupModal[_ngcontent-%COMP%]   .reactionDiv[_ngcontent-%COMP%]{background-color:#fff;padding:5px!important;border-radius:16px;position:relative;height:55px}.reactionPopupModal[_ngcontent-%COMP%]   .reactionDiv[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{overflow-y:scroll;max-height:60vh;margin-top:10px}.peopleReactions[_ngcontent-%COMP%]{border-radius:10px;--inner-padding-end: 0}.peopleReactions[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px!important;object-fit:contain!important}.modal-hight[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{top:100%;left:0;display:block;width:100%;height:100%}.commnet[_ngcontent-%COMP%]{margin-left:1px;border-color:#000}"]}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(Z),d.Bz]}),o})(),T=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,m.u5,e.Pc,w]}),o})()}}]);