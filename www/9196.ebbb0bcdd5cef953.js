"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{9196:(I,g,a)=>{a.r(g),a.d(g,{Tab2PageModule:()=>q});var s=a(4556),u=a(6895),f=a(433),p=a(2598),l=a(655),i=a(8256),h=a(427);function m(t,d){if(1&t){const e=i.EpF();i.TgZ(0,"ion-item",12)(1,"ion-avatar",13),i._UZ(2,"img",14),i.qZA(),i.TgZ(3,"ion-label",15)(4,"h3",8),i._uU(5),i.qZA(),i.TgZ(6,"p"),i._uU(7),i.qZA()(),i.TgZ(8,"ion-button",16),i.NdJ("click",function(){const n=i.CHM(e).$implicit,c=i.oxw(2);return i.KtG(c.acceptFriend(n.id,n.senderId,n.RecieverId))}),i._uU(9,"Add"),i.qZA()()}if(2&t){const e=d.$implicit;i.xp6(2),i.s9C("src",e.profiles.avatar_url,i.LSH),i.xp6(3),i.Oqu(e.profiles.full_name),i.xp6(2),i.Oqu(e.profiles.bio)}}function v(t,d){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,m,10,3,"ion-item",11),i.qZA()),2&t){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.friendshipRequest)}}function b(t,d){if(1&t){const e=i.EpF();i.TgZ(0,"ion-button",16),i.NdJ("click",function(){i.CHM(e);const r=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.addFriend(r.id))}),i._uU(1,"Add"),i.qZA()}}function T(t,d){1&t&&(i.TgZ(0,"ion-button",23),i._uU(1,"Added"),i.qZA())}function x(t,d){if(1&t){const e=i.EpF();i.TgZ(0,"ion-button",16),i.NdJ("click",function(){i.CHM(e);const r=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.acceptFriend(r.friendshipId,"",""))}),i._uU(1,"Accept"),i.qZA()}}function F(t,d){if(1&t){const e=i.EpF();i.TgZ(0,"ion-button",16),i.NdJ("click",function(){i.CHM(e);const r=i.oxw().$implicit,n=i.oxw(2);return i.KtG(n.visitFriend(r.id))}),i._uU(1,"Visit"),i.qZA()}}function Z(t,d){if(1&t){const e=i.EpF();i.TgZ(0,"ion-item-sliding",18)(1,"ion-item",12)(2,"ion-avatar",13),i._UZ(3,"img",14),i.qZA(),i.TgZ(4,"ion-label",15)(5,"h3",8),i._uU(6),i.qZA(),i.TgZ(7,"p"),i._uU(8),i.qZA()(),i.YNc(9,b,2,0,"ion-button",19),i.YNc(10,T,2,0,"ion-button",20),i.YNc(11,x,2,0,"ion-button",19),i.YNc(12,F,2,0,"ion-button",19),i.qZA(),i.TgZ(13,"ion-item-options",21)(14,"ion-item-option",22),i.NdJ("click",function(){const n=i.CHM(e).$implicit,c=i.oxw(2);return i.KtG(c.deleteFriend(n.id))}),i._uU(15,"Delete"),i.qZA()()()}if(2&t){const e=d.$implicit,o=i.oxw(2);i.xp6(3),i.s9C("src",e.avatar_url,i.LSH),i.xp6(3),i.Oqu(e.full_name),i.xp6(2),i.Oqu(e.bio),i.xp6(1),i.Q6J("ngIf",0===e.friendShipStatues&&!o.profile.friends.includes(e.id)),i.xp6(1),i.Q6J("ngIf",1===e.friendShipStatues),i.xp6(1),i.Q6J("ngIf",2===e.friendShipStatues),i.xp6(1),i.Q6J("ngIf",o.profile.friends.includes(e.id))}}function P(t,d){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,Z,16,7,"ion-item-sliding",17),i.qZA()),2&t){const e=i.oxw();i.xp6(1),i.Q6J("ngForOf",e.friendList)}}const S=[{path:"",component:(()=>{class t{constructor(e,o,r){this.apiService=e,this.actRoute=o,this.navCtrl=r,this.friendList=[],this.activeTab="friendList",this.profile=this.apiService.profile,this.actRoute.queryParams.subscribe(n=>{console.log("url parms",n),this.activeTab=n.activeTab||"friendList"})}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.apiService.getUserProfile(),this.profile=this.apiService.profile,this.friendList=yield this.apiService.getFriends(this.profile.friends);const e=this.friendList.findIndex(o=>o.id===this.apiService.profile.id);-1!==e?this.friendList.splice(e,1):console.log("something went worn at my-friend.page.ts"),this.initialFriendList=this.friendList,this.friendshipRequest=yield this.apiService.bringFriendshipRequests()})}bring(){return(0,l.mG)(this,void 0,void 0,function*(){let e=yield this.apiService.bringMemebers();console.log("ever member data: ",e),this.friendList=e})}addFriend(e){return(0,l.mG)(this,void 0,void 0,function*(){console.log("Friend id",e),yield this.apiService.addFriend(e)})}acceptFriend(e,o,r){return(0,l.mG)(this,void 0,void 0,function*(){yield this.apiService.acceptFriendship(e);const c=this.friendshipRequest.findIndex(_=>_.id===e);if(this.apiService.getUserProfile(),this.friendList=this.profile.friends,yield localStorage.setItem("newFriend","true"),this.ngOnInit(),-1!==c){if(!(yield this.apiService.supabase.from("friendrequest").delete().eq("id",e)))return!1;let C=this.friendshipRequest.splice(c,0);this.friendshipRequest=C,this.activeTab="FriendsRequest",this.apiService.getUserProfile(),this.ngOnInit()}})}searchOnChange(e){return(0,l.mG)(this,void 0,void 0,function*(){if(this.searchinput.length<3)return!1;this.friendList=[];let o=yield this.apiService.searchForFriends(this.searchinput);if(o.length>=1)for(let r of o)if(r.id===this.profile.id)console.log("this is me!!");else{let n=this.friendshipRequest;1===n[0]?r.friendShipStatues=1:2===n[0]?(r.friendShipStatues=2,r.friendshipId=n[1],console.log("friendship Id : "+r.friendshipId)):r.friendShipStatues=0,this.friendList.unshift(r),console.log("check: "+n)}else this.friendList=this.initialFriendList;console.log("friends",this.friendList)})}acceptFriendship(e){return(0,l.mG)(this,void 0,void 0,function*(){yield this.apiService.acceptFriendship(e),this.apiService.getUserProfile(),this.profile=this.apiService.profile})}visitFriend(e){return(0,l.mG)(this,void 0,void 0,function*(){let o=yield this.apiService.getUserProfileById(e);yield localStorage.setItem("myFriend",JSON.stringify(o)),this.navCtrl.navigateForward("/friend-profile")})}handleRefresh(e){setTimeout(()=>{this.ngOnInit(),e.target.complete()},1e3)}deleteFriend(e){return(0,l.mG)(this,void 0,void 0,function*(){if(yield this.apiService.deleteFriend(e)){let r=this.friendList.findIndex(n=>n===e);this.friendList.splice(r,1),this.apiService.getUserProfile(),this.profile=this.apiService.profile}})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(h.s),i.Y36(p.gz),i.Y36(s.SH))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-tab2"]],decls:20,vars:7,consts:[["color","danger"],[1,"ion-padding"],["slot","fixed",1,"ion-padding",2,"background-color","#F1F1F1","height","300px",3,"pullFactor","pullMin","pullMax","ionRefresh"],["lines","none",1,"searchBar","ion-margin-bottom"],["name","search-outline","color","danger","slot","start"],["type","text","placeholder","Search friends",3,"ngModel","ngModelChange"],["color","danger",3,"ngModel","ngModelChange"],["value","friendList"],[1,"bold"],["value","FriendsRequest"],[4,"ngIf"],["lines","none","class","ion-margin-bottom",4,"ngFor","ngForOf"],["lines","none",1,"ion-margin-bottom"],["routerLink","/friend-profile","slot","start"],["alt","",3,"src"],["routerLink","/friend-profile"],["color","danger","shape","round","slot","end",3,"click"],["class"," ion-no-border","style","background-color: #F1F1F1;",4,"ngFor","ngForOf"],[1,"ion-no-border",2,"background-color","#F1F1F1"],["color","danger","shape","round","slot","end",3,"click",4,"ngIf"],["color","danger","shape","round","slot","end",4,"ngIf"],[1,"ion-padding",2,"height","70%","top","10%"],["color","danger",2,"border-radius","8px","width","100px",3,"click"],["color","danger","shape","round","slot","end"]],template:function(e,o){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),i._uU(3," Add Friends "),i.qZA()()(),i.TgZ(4,"ion-content",1)(5,"ion-refresher",2),i.NdJ("ionRefresh",function(n){return o.handleRefresh(n)}),i.qZA(),i.TgZ(6,"ion-item",3),i._UZ(7,"ion-icon",4),i.TgZ(8,"ion-input",5),i.NdJ("ngModelChange",function(n){return o.searchinput=n})("ngModelChange",function(n){return o.searchOnChange(n)}),i.qZA()(),i.TgZ(9,"ion-header")(10,"ion-toolbar")(11,"ion-segment",6),i.NdJ("ngModelChange",function(n){return o.activeTab=n}),i.TgZ(12,"ion-segment-button",7)(13,"ion-label",8),i._uU(14,"My Friends"),i.qZA()(),i.TgZ(15,"ion-segment-button",9)(16,"ion-label",8),i._uU(17,"Friendship Request"),i.qZA()()()()(),i.YNc(18,v,2,1,"div",10),i.YNc(19,P,2,1,"div",10),i.qZA()),2&e&&(i.xp6(5),i.Q6J("pullFactor",.5)("pullMin",100)("pullMax",200),i.xp6(3),i.Q6J("ngModel",o.searchinput),i.xp6(3),i.Q6J("ngModel",o.activeTab),i.xp6(7),i.Q6J("ngIf","FriendsRequest"===o.activeTab),i.xp6(1),i.Q6J("ngIf","friendList"===o.activeTab))},dependencies:[s.BJ,s.YG,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.u8,s.IK,s.td,s.Q$,s.nJ,s.cJ,s.GO,s.wd,s.sr,s.QI,s.j9,s.YI,u.sg,u.O5,f.JJ,f.On,p.rH],styles:["ion-item[_ngcontent-%COMP%]{border-radius:10px!important}ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{object-fit:cover;height:60px!important;width:60px!important}.searchBar[_ngcontent-%COMP%]{border-radius:30px!important}ion-button[_ngcontent-%COMP%]{height:30px!important;width:55px!important}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[p.Bz.forChild(S),p.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[s.Pc,u.ez,f.u5,M]}),t})()}}]);